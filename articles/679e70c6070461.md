---
title: "SmartContract: WhatsABI"
emoji: "ğŸŒ"
type: "tech"
topics: ["Blockchain", "SmartContract", "Ethereum"]
published: true
---

## WhatsABI ã¨ã¯

æœªæ¤œè¨¼ã§ã‚ã£ã¦ã‚‚Ethereumã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ã‚‰ABIã‚’æ¨æ¸¬ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã€‚

EVMãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã‚’è§£æã—ã¦4ãƒã‚¤ãƒˆã®JUMPIå‘½ä»¤ã‚’è¦‹ã¤ã‘ã€ãã‚ŒãŒæœ‰åŠ¹ãªå†…éƒ¨JUMPDESTã‚¿ãƒ¼ã‚²ãƒƒãƒˆã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

4ãƒã‚¤ãƒˆã®é–¢æ•°ç½²åãƒãƒƒã‚·ãƒ¥ã‚»ãƒ¬ã‚¯ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ã§ã€Solidityã¨åŒæ§˜ã®ãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæŠ€è¡“ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚ŒãŸæœªæ¤œè¨¼ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®é–¢æ•°å‘¼ã³å‡ºã—ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¾ãŸã€4byte.directoryãªã©ã®APIã§4byteã‚»ãƒ¬ã‚¯ã‚¿ã‚’èª¿ã¹ã‚Œã°ã€ã‚ªãƒªã‚¸ãƒŠãƒ«ã®é–¢æ•°ã‚·ã‚°ãƒãƒãƒ£ã®å¯èƒ½æ€§ã‚’ç™ºè¦‹ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

### å‚è€ƒæ–‡çŒ®

- [Github WhatsABI](https://github.com/shazow/whatsabi/)
- [Get ABI for unverified contracts](https://abi.w1nt3r.xyz/)
- [Ethereum Signature Database](https://www.4byte.directory/)

### å®Ÿè£…

#### æ¦‚è¦

Next.jsã®APIã§ `WhatsABI` ã‚’å®Ÿè£…ã—ãŸæ–¹æ³•ã‚’è¨˜è¼‰ã€‚

`WhatsABI` ã¯å†…éƒ¨ã§ `fs` ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã¯ãªãã‚µãƒ¼ãƒãƒ¼ã«å®Ÿè£…ã—ã¾ã—ãŸã€‚

#### å®Ÿè£…æ–¹æ³•

å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
yarn add ethers @shazow/whatsabi
```

`nextjs/pages/api/get-selectors.ts` ã‚’ä½œæˆ

```typescript
import type { NextApiRequest, NextApiResponse } from 'next'

import { getDefaultProvider } from 'ethers'
import { selectorsFromBytecode } from '@shazow/whatsabi'

export default async function handler(
  res: NextApiResponse
) {

  const address = "0x00000000006c3852cbEf3e08E8dF289169EdE581"
  const code = await getDefaultProvider().getCode(address)
  const selectors = selectorsFromBytecode(code)
  res.status(200).json({ selectors })
}
```

ä»¥ä¸‹ãŒè¿”å´å€¤

```bash
[
  '0x06fdde03', '0x46423aa7',
  '0x55944a42', '0x5b34b966',
  '0x79df72bd', '0x87201b41',
  '0x88147732', '0xa8174404',
  '0xb3a34c4c', '0xe7acab24',
  '0xed98a574', '0xf07ec373',
  '0xf47b7740', '0xfb0f3ee1'
]
```
